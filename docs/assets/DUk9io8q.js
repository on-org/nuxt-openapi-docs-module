import{_ as r,o as i,c as o,a as l,t as d,b as h,ah as m,aj as f,F as v,j as g,ad as c,ac as O,d as V}from"./D0_sVEes.js";const k={},x={class:"oapi-expand-icon",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},w=l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"},null,-1),y=[w];function P(t,a){return i(),o("svg",x,y)}const u=r(k,[["render",P]]),C={name:"OpenApiDropdown",components:{OpenApiExpandIcon:u},model:{prop:"modelValue",event:"update:modelValue"},props:{modelValue:{type:[String,Number],default:null},options:{type:Array,required:!0},valueProp:{type:String,default:"value"},textProp:{type:String,default:"text"},placeholder:{type:String,default:null}},data(){return{isOpen:!1}},computed:{classes(){return{"oapi-dd--is-open":this.isOpen,"oapi-dd--empty":this.modelValue===null}},selectedOption(){return this.modelValue===null?null:this.options.find(t=>t[this.valueProp]===this.modelValue)||null}},beforeUnmount(){this.cleanupOutside()},methods:{toggle(){this.isOpen?this.close():this.open()},handleOutsideClick(t){this.isOpen&&(this.$refs.popup&&(this.$refs.input===t.target||this.$refs.input.contains(t.target))||this.$refs.popup&&(this.$refs.popup===t.target||this.$refs.popup.contains(t.target))||this.close())},cleanupOutside(){document.removeEventListener("click",this.handleOutsideClick)},open(){this.isOpen=!0,this.$nextTick(()=>{document.addEventListener("click",this.handleOutsideClick)})},close(){this.isOpen=!1,this.cleanupOutside()},select(t){this.modelValue!==t&&this.$emit("update:modelValue",t),this.close()}}},S={class:"oapi-dd-container__content"},E={class:"oapi-dd-container__dd-icon"},A={ref:"popup",class:"oapi-dd-popup"},B={class:"oapi-dd-popup__list"},N=["onClick"];function b(t,a,e,j,p,n){const _=u;return i(),o("div",{class:c(["oapi-dd",n.classes]),ref:"input"},[l("div",{class:"oapi-dd-container",onClick:a[0]||(a[0]=(...s)=>n.toggle&&n.toggle(...s))},[l("span",S,d(n.selectedOption?n.selectedOption[e.textProp]:e.placeholder),1),l("span",E,[h(_)])]),m(l("div",A,[l("ul",B,[(i(!0),o(v,null,g(e.options,s=>(i(),o("li",{key:s[e.valueProp],class:c(["oapi-dd-popup__list-item",{"oapi-dd-popup__list-item--is-active":e.modelValue!==null&&s[e.valueProp]===e.modelValue}]),onClick:D=>n.select(s[e.valueProp])},[O(t.$slots,"default",{item:s,selectedValue:e.modelValue,isSelected:e.modelValue!==null&&s[e.valueProp]===e.modelValue,close:n.close},()=>[V(d(s[e.textProp]),1)])],10,N))),128))])],512),[[f,p.isOpen]])],2)}const F=r(C,[["render",b]]);export{u as _,F as a};
